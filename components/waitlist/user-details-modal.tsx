"use client";

import { useState } from "react";
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { ServiceProvider } from "@/types";
import { updateUserStatus } from "@/lib/api/waitlist";
import { toast } from "sonner";

interface UserDetailsModalProps {
  isOpen: boolean;
  onClose: () => void;
  user: ServiceProvider | null;
  onStatusUpdate?: (updatedUser: ServiceProvider) => void;
}

export function UserDetailsModal({
  isOpen,
  onClose,
  user,
  onStatusUpdate,
}: UserDetailsModalProps) {
  const [isUpdating, setIsUpdating] = useState(false);
  const [currentUser, setCurrentUser] = useState<ServiceProvider | null>(user);

  if (!user) return null;

  // Update currentUser when user prop changes
  if (user && currentUser?.id !== user.id) {
    setCurrentUser(user);
  }

  const handleStatusUpdate = async (newStatus: "onboarded" | "rejected") => {
    if (!currentUser) return;

    setIsUpdating(true);
    try {
      const updatedUser = await updateUserStatus(currentUser.id, newStatus);
      setCurrentUser(updatedUser);

      // Show success toast
      toast.success(
        `User ${
          newStatus === "onboarded" ? "onboarded" : "rejected"
        } successfully!`
      );

      // Notify parent component about the update
      if (onStatusUpdate) {
        onStatusUpdate(updatedUser);
      }
    } catch (error) {
      console.error("Failed to update user status:", error);
      toast.error("Failed to update user status. Please try again.");
    } finally {
      setIsUpdating(false);
    }
  };

  const displayUser = currentUser || user;

  const formatServiceOffering = (service: string) => {
    return service
      .split("-")
      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
      .join(" ");
  };

  const formatVendorType = (type: string) => {
    return type.charAt(0).toUpperCase() + type.slice(1);
  };

  const getStatusBadge = (status: string) => {
    if (status === "onboarded") {
      return (
        <div className="space-x-2">
          <Badge className="bg-[#E8F5E9] text-[#2E7D32] hover:bg-[#E8F5E9] rounded-full px-3 py-1">
            Customer
          </Badge>

          <Badge className="bg-[#FFF3E0] text-[#E65100] hover:bg-[#FFF3E0] rounded-full px-3 py-1">
            Invited
          </Badge>
        </div>
      );
    }
    return (
      <Badge className="bg-[#FFF3E0] text-[#E65100] hover:bg-[#FFF3E0] rounded-full px-3 py-1">
        Invited
      </Badge>
    );
  };

  return (
    <Dialog open={isOpen} onOpenChange={onClose}>
      <DialogContent className="max-w-[500px] p-0 gap-0">
        {/* Header */}
        <DialogHeader className="p-6 pb-4 space-y-0">
          <div className="flex items-center justify-between">
            <DialogTitle className="text-lg font-medium flex items-center gap-2">
              <svg
                width="15"
                height="18"
                viewBox="0 0 15 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M7.15995 0C6.1291 0 5.14048 0.409501 4.41156 1.13842C3.68265 1.86734 3.27314 2.85596 3.27314 3.8868C3.27314 4.91765 3.68265 5.90627 4.41156 6.63519C5.14048 7.36411 6.1291 7.77361 7.15995 7.77361C8.19079 7.77361 9.17942 7.36411 9.90833 6.63519C10.6373 5.90627 11.0468 4.91765 11.0468 3.8868C11.0468 2.85596 10.6373 1.86734 9.90833 1.13842C9.17942 0.409501 8.19079 0 7.15995 0ZM4.50056 3.8868C4.50056 3.18149 4.78074 2.50506 5.27947 2.00633C5.77821 1.5076 6.45463 1.22741 7.15995 1.22741C7.86526 1.22741 8.54169 1.5076 9.04042 2.00633C9.53916 2.50506 9.81934 3.18149 9.81934 3.8868C9.81934 4.59212 9.53916 5.26855 9.04042 5.76728C8.54169 6.26601 7.86526 6.5462 7.15995 6.5462C6.45463 6.5462 5.77821 6.26601 5.27947 5.76728C4.78074 5.26855 4.50056 4.59212 4.50056 3.8868ZM7.15995 9.00102C5.26728 9.00102 3.52272 9.43143 2.23066 10.1581C0.957427 10.8749 4.57431e-05 11.9599 4.57431e-05 13.297V13.3804C-0.000772532 14.3313 -0.00159088 15.5243 1.04498 16.3769C1.55968 16.7959 2.28058 17.0946 3.25432 17.291C4.22971 17.489 5.50212 17.5929 7.15995 17.5929C8.81777 17.5929 10.0894 17.489 11.0664 17.291C12.0401 17.0946 12.7602 16.7959 13.2757 16.3769C14.3223 15.5243 14.3207 14.3313 14.3199 13.3804V13.297C14.3199 11.9599 13.3625 10.8749 12.0901 10.1581C10.7972 9.43143 9.05344 9.00102 7.15995 9.00102ZM1.22746 13.297C1.22746 12.6006 1.73642 11.8445 2.83209 11.2284C3.90894 10.6228 5.43748 10.2284 7.16077 10.2284C8.88242 10.2284 10.411 10.6228 11.4878 11.2284C12.5843 11.8445 13.0924 12.6006 13.0924 13.297C13.0924 14.3673 13.0597 14.9695 12.5 15.4245C12.1972 15.6716 11.6899 15.913 10.8225 16.0881C9.95763 16.2632 8.77522 16.3655 7.15995 16.3655C5.54467 16.3655 4.36145 16.2632 3.49735 16.0881C2.62998 15.913 2.12265 15.6716 1.81989 15.4253C1.26019 14.9695 1.22746 14.3673 1.22746 13.297Z"
                  fill="black"
                />
              </svg>
              User Details
            </DialogTitle>
          </div>
        </DialogHeader>

        {/* Content */}
        <div className="px-6 pb-6 space-y-6">
          {/* Company Name & Status */}
          <div className="flex justify-between items-center">
            <div className="space-y-2">
              <h2 className="text-xl font-semibold text-black">
                {displayUser.name || displayUser.email}
              </h2>
              <div className="flex items-center gap-2">
                <svg
                  width="14"
                  height="12"
                  viewBox="0 0 14 12"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.42924 2.46811L6.87963 6.28366C6.92498 6.32252 7.00272 6.32252 7.04806 6.28366L11.4985 2.46811M1.2632 0.48584H12.6645C13.092 0.48584 13.4419 0.835652 13.4419 1.2632V9.29593C13.4419 10.151 12.7422 10.8507 11.8871 10.8507H2.04056C1.18546 10.8507 0.48584 10.151 0.48584 9.29593V1.2632C0.48584 0.835652 0.835652 0.48584 1.2632 0.48584Z"
                    stroke="#7F7F7F"
                    strokeWidth="0.971701"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                </svg>

                <span className="text-[#AEAEAE]">{displayUser.email}</span>
              </div>
            </div>

            <div className="flex items-center gap-2 mt-2">
              {getStatusBadge(displayUser.status)}
            </div>
          </div>{" "}
          {/* Contact Information */}
          <div className="space-y-3">
            <h3 className="text-lg font-semibold text-black">
              Contact Information
            </h3>
            <div className="grid grid-cols-2 gap-3 text-[#7F7F7F]">
              <div className="flex items-center gap-2">
                <svg
                  width="14"
                  height="12"
                  viewBox="0 0 14 12"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.42924 2.46811L6.87963 6.28366C6.92498 6.32252 7.00272 6.32252 7.04806 6.28366L11.4985 2.46811M1.2632 0.48584H12.6645C13.092 0.48584 13.4419 0.835652 13.4419 1.2632V9.29593C13.4419 10.151 12.7422 10.8507 11.8871 10.8507H2.04056C1.18546 10.8507 0.48584 10.151 0.48584 9.29593V1.2632C0.48584 0.835652 0.835652 0.48584 1.2632 0.48584Z"
                    stroke="black"
                    strokeWidth="0.971701"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                </svg>

                <span>{displayUser.email}</span>
              </div>

              <div className="flex items-center gap-2 text-sm">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M13.6073 11.3665L13.9804 10.9959L13.1138 10.1252L12.7423 10.4959L13.6073 11.3665ZM15.2315 10.8404L16.7953 11.6906L17.3803 10.6121L15.8174 9.76272L15.2315 10.8404ZM17.0956 13.3795L15.9336 14.5357L16.7985 15.4055L17.9605 14.2501L17.0956 13.3795ZM15.225 14.9072C14.0385 15.0185 10.97 14.9195 7.64613 11.6153L6.7804 12.4851C10.407 16.0913 13.8593 16.268 15.3396 16.1297L15.225 14.9072ZM7.64613 11.6153C4.47859 8.46494 3.95326 5.81618 3.8878 4.66651L2.66202 4.73606C2.74385 6.18277 3.39438 9.11874 6.7804 12.4851L7.64613 11.6153ZM8.77126 6.55836L9.0061 6.32433L8.14201 5.45451L7.90716 5.68771L8.77126 6.55836ZM9.19267 3.3499L8.16164 1.97193L7.1789 2.70838L8.20992 4.08553L9.19267 3.3499ZM4.69134 1.67162L3.40665 2.94813L4.27239 3.81877L5.55626 2.54227L4.69134 1.67162ZM8.33921 6.12304C7.90552 5.68771 7.90552 5.68771 7.90552 5.68935H7.90389L7.90143 5.69262C7.86255 5.73183 7.82773 5.77487 7.79751 5.82109C7.75333 5.88655 7.70505 5.97247 7.66413 6.0813C7.56453 6.36224 7.53971 6.66425 7.59212 6.95768C7.70177 7.66548 8.18947 8.60077 9.43815 9.84291L10.3039 8.97227C9.13457 7.81032 8.85636 7.10333 8.80481 6.76947C8.78026 6.61073 8.80563 6.53217 8.81299 6.51417C8.8179 6.50326 8.8179 6.50162 8.81299 6.50926C8.8057 6.52055 8.79749 6.53123 8.78844 6.54117L8.78026 6.54936L8.77208 6.55672L8.33921 6.12304ZM9.43815 9.84291C10.6877 11.0851 11.6279 11.5695 12.3365 11.6775C12.699 11.7331 12.9911 11.6889 13.2129 11.6063C13.3371 11.5609 13.4531 11.4956 13.5565 11.4132L13.5974 11.3764L13.6032 11.3714L13.6056 11.369L13.6064 11.3674C13.6064 11.3674 13.6073 11.3665 13.1744 10.9312C12.7407 10.4959 12.7432 10.4951 12.7432 10.4951L12.7448 10.4934L12.7464 10.4918L12.7513 10.4877L12.7595 10.4795L12.7906 10.455C12.7983 10.4501 12.7964 10.4506 12.7849 10.4566C12.7644 10.464 12.6842 10.4893 12.523 10.4648C12.1843 10.4124 11.4724 10.1342 10.3039 8.97227L9.43815 9.84291ZM8.16164 1.97111C7.327 0.858257 5.68718 0.68151 4.69134 1.67162L5.55626 2.54227C5.99158 2.1094 6.76403 2.1544 7.1789 2.70838L8.16164 1.97111ZM3.88861 4.66733C3.87225 4.3842 4.00235 4.08799 4.27239 3.81959L3.40583 2.94895C2.96642 3.38591 2.62029 4.00452 2.66202 4.73606L3.88861 4.66733ZM15.9336 14.5357C15.7094 14.7599 15.4672 14.8859 15.2258 14.908L15.3396 16.1297C15.941 16.0733 16.4328 15.7705 16.7994 15.4064L15.9336 14.5357ZM9.0061 6.32433C9.8121 5.52324 9.87184 4.25737 9.19349 3.35072L8.21074 4.08635C8.54051 4.5274 8.49141 5.10592 8.14119 5.45532L9.0061 6.32433ZM16.7961 11.6914C17.4646 12.0547 17.5685 12.9106 17.0964 13.3803L17.9621 14.2501C19.0586 13.1594 18.7207 11.3404 17.3811 10.6129L16.7961 11.6914ZM13.9804 10.9967C14.2946 10.6841 14.8003 10.6072 15.2324 10.8412L15.8182 9.76354C14.9312 9.28076 13.8315 9.41414 13.1147 10.126L13.9804 10.9967Z"
                    fill="black"
                  />
                </svg>

                <span>{displayUser.phoneNumber}</span>
              </div>
              <div className="flex items-center gap-2 text-sm">
                <svg
                  width="15"
                  height="17"
                  viewBox="0 0 15 17"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.51158 2.46582C3.73107 1.27072 5.37292 0.605168 7.08036 0.613791C8.78779 0.622415 10.4228 1.30452 11.6302 2.51187C12.8376 3.71923 13.5197 5.35428 13.5283 7.06171C13.5369 8.76915 12.8714 10.411 11.6763 11.6305L8.25095 15.0558C7.94406 15.3626 7.52787 15.5349 7.09392 15.5349C6.65996 15.5349 6.24377 15.3626 5.93688 15.0558L2.51158 11.6305C1.29635 10.4151 0.613647 8.76684 0.613647 7.04815C0.613647 5.32947 1.29635 3.68117 2.51158 2.46582Z"
                    stroke="black"
                    strokeWidth="1.22741"
                    strokeLinejoin="round"
                  />
                  <path
                    d="M7.09386 9.50297C8.44962 9.50297 9.54869 8.40391 9.54869 7.04815C9.54869 5.69238 8.44962 4.59332 7.09386 4.59332C5.7381 4.59332 4.63904 5.69238 4.63904 7.04815C4.63904 8.40391 5.7381 9.50297 7.09386 9.50297Z"
                    stroke="black"
                    strokeWidth="1.22741"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                </svg>

                <span>United Kingdom</span>
              </div>
              <div className="flex items-center gap-2 text-sm">
                <svg
                  width="15"
                  height="15"
                  viewBox="0 0 15 15"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M10.4331 8.59185C10.5959 8.59185 10.752 8.52719 10.8671 8.4121C10.9822 8.29701 11.0468 8.14091 11.0468 7.97815C11.0468 7.81538 10.9822 7.65928 10.8671 7.54419C10.752 7.4291 10.5959 7.36444 10.4331 7.36444C10.2704 7.36444 10.1143 7.4291 9.99918 7.54419C9.88409 7.65928 9.81943 7.81538 9.81943 7.97815C9.81943 8.14091 9.88409 8.29701 9.99918 8.4121C10.1143 8.52719 10.2704 8.59185 10.4331 8.59185ZM10.4331 11.0467C10.5959 11.0467 10.752 10.982 10.8671 10.8669C10.9822 10.7518 11.0468 10.5957 11.0468 10.433C11.0468 10.2702 10.9822 10.1141 10.8671 9.99901C10.752 9.88392 10.5959 9.81926 10.4331 9.81926C10.2704 9.81926 10.1143 9.88392 9.99918 9.99901C9.88409 10.1141 9.81943 10.2702 9.81943 10.433C9.81943 10.5957 9.88409 10.7518 9.99918 10.8669C10.1143 10.982 10.2704 11.0467 10.4331 11.0467ZM7.97831 7.97815C7.97831 8.14091 7.91366 8.29701 7.79856 8.4121C7.68347 8.52719 7.52737 8.59185 7.36461 8.59185C7.20184 8.59185 7.04575 8.52719 6.93065 8.4121C6.81556 8.29701 6.7509 8.14091 6.7509 7.97815C6.7509 7.81538 6.81556 7.65928 6.93065 7.54419C7.04575 7.4291 7.20184 7.36444 7.36461 7.36444C7.52737 7.36444 7.68347 7.4291 7.79856 7.54419C7.91366 7.65928 7.97831 7.81538 7.97831 7.97815ZM7.97831 10.433C7.97831 10.5957 7.91366 10.7518 7.79856 10.8669C7.68347 10.982 7.52737 11.0467 7.36461 11.0467C7.20184 11.0467 7.04575 10.982 6.93065 10.8669C6.81556 10.7518 6.7509 10.5957 6.7509 10.433C6.7509 10.2702 6.81556 10.1141 6.93065 9.99901C7.04575 9.88392 7.20184 9.81926 7.36461 9.81926C7.52737 9.81926 7.68347 9.88392 7.79856 9.99901C7.91366 10.1141 7.97831 10.2702 7.97831 10.433ZM4.29608 8.59185C4.45884 8.59185 4.61494 8.52719 4.73003 8.4121C4.84513 8.29701 4.90978 8.14091 4.90978 7.97815C4.90978 7.81538 4.84513 7.65928 4.73003 7.54419C4.61494 7.4291 4.45884 7.36444 4.29608 7.36444C4.13331 7.36444 3.97722 7.4291 3.86212 7.54419C3.74703 7.65928 3.68237 7.81538 3.68237 7.97815C3.68237 8.14091 3.74703 8.29701 3.86212 8.4121C3.97722 8.52719 4.13331 8.59185 4.29608 8.59185ZM4.29608 11.0467C4.45884 11.0467 4.61494 10.982 4.73003 10.8669C4.84513 10.7518 4.90978 10.5957 4.90978 10.433C4.90978 10.2702 4.84513 10.1141 4.73003 9.99901C4.61494 9.88392 4.45884 9.81926 4.29608 9.81926C4.13331 9.81926 3.97722 9.88392 3.86212 9.99901C3.74703 10.1141 3.68237 10.2702 3.68237 10.433C3.68237 10.5957 3.74703 10.7518 3.86212 10.8669C3.97722 10.982 4.13331 11.0467 4.29608 11.0467Z"
                    fill="black"
                  />
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M4.29602 1.07397C4.41809 1.07397 4.53517 1.12247 4.62148 1.20879C4.7078 1.29511 4.7563 1.41218 4.7563 1.53425V2.00251C5.16257 1.99453 5.60996 1.99453 6.10215 1.99453H8.62633C9.11913 1.99453 9.56652 1.99453 9.9728 2.00251V1.53425C9.9728 1.41218 10.0213 1.29511 10.1076 1.20879C10.1939 1.12247 10.311 1.07397 10.4331 1.07397C10.5552 1.07397 10.6722 1.12247 10.7585 1.20879C10.8449 1.29511 10.8934 1.41218 10.8934 1.53425V2.04179C11.0529 2.05406 11.2041 2.06961 11.3469 2.08843C12.0661 2.1854 12.6486 2.38915 13.1082 2.8482C13.5673 3.30786 13.771 3.89027 13.868 4.60953C13.9619 5.30916 13.9619 6.2021 13.9619 7.33009V8.62624C13.9619 9.75423 13.9619 10.6478 13.868 11.3468C13.771 12.0661 13.5673 12.6485 13.1082 13.1081C12.6486 13.5672 12.0661 13.7709 11.3469 13.8679C10.6473 13.9618 9.75432 13.9618 8.62633 13.9618H6.10338C4.97539 13.9618 4.08183 13.9618 3.38282 13.8679C2.66356 13.7709 2.08115 13.5672 1.62149 13.1081C1.16244 12.6485 0.958685 12.0661 0.861719 11.3468C0.767822 10.6472 0.767822 9.75423 0.767822 8.62624V7.33009C0.767822 6.2021 0.767822 5.30855 0.861719 4.60953C0.958685 3.89027 1.16244 3.30786 1.62149 2.8482C2.08115 2.38915 2.66356 2.1854 3.38282 2.08843C3.52602 2.06961 3.6772 2.05406 3.83635 2.04179V1.53425C3.83635 1.41229 3.88476 1.29531 3.97095 1.209C4.05713 1.1227 4.17405 1.07414 4.29602 1.07397ZM3.50434 3.00101C2.88756 3.08386 2.53161 3.23974 2.27202 3.49934C2.01242 3.75894 1.85654 4.11489 1.77369 4.73166C1.75978 4.83599 1.74791 4.94625 1.73809 5.06245H12.991C12.9812 4.94625 12.9693 4.83579 12.9554 4.73105C12.8726 4.11427 12.7167 3.75832 12.4571 3.49873C12.1975 3.23913 11.8415 3.08325 11.2241 3.0004C10.5939 2.91571 9.7623 2.91448 8.59196 2.91448H6.13714C4.9668 2.91448 4.13584 2.91632 3.50434 3.00101ZM1.68777 7.36446C1.68777 6.84036 1.68777 6.38437 1.69575 5.98362H13.0333C13.0413 6.38437 13.0413 6.84036 13.0413 7.36446V8.59187C13.0413 9.76221 13.0401 10.5938 12.9554 11.2247C12.8726 11.8414 12.7167 12.1974 12.4571 12.457C12.1975 12.7166 11.8415 12.8725 11.2241 12.9553C10.5939 13.04 9.7623 13.0412 8.59196 13.0412H6.13714C4.9668 13.0412 4.13584 13.04 3.50434 12.9553C2.88756 12.8725 2.53161 12.7166 2.27202 12.457C2.01242 12.1974 1.85654 11.8414 1.77369 11.2241C1.689 10.5938 1.68777 9.76221 1.68777 8.59187V7.36446Z"
                    fill="black"
                  />
                </svg>

                <span>Signed up {displayUser.signupDate}</span>
              </div>
            </div>
          </div>
          {/* Customer Details */}
          <div className="space-y-3">
            <h3 className="text-lg font-semibold">Customer Details</h3>
            <div className="flex items-center gap-2 text-sm">
              <svg
                width="15"
                height="18"
                viewBox="0 0 15 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M7.15995 0C6.1291 0 5.14048 0.409501 4.41156 1.13842C3.68265 1.86734 3.27314 2.85596 3.27314 3.8868C3.27314 4.91765 3.68265 5.90627 4.41156 6.63519C5.14048 7.36411 6.1291 7.77361 7.15995 7.77361C8.19079 7.77361 9.17942 7.36411 9.90833 6.63519C10.6373 5.90627 11.0468 4.91765 11.0468 3.8868C11.0468 2.85596 10.6373 1.86734 9.90833 1.13842C9.17942 0.409501 8.19079 0 7.15995 0ZM4.50056 3.8868C4.50056 3.18149 4.78074 2.50506 5.27947 2.00633C5.77821 1.5076 6.45463 1.22741 7.15995 1.22741C7.86526 1.22741 8.54169 1.5076 9.04042 2.00633C9.53916 2.50506 9.81934 3.18149 9.81934 3.8868C9.81934 4.59212 9.53916 5.26855 9.04042 5.76728C8.54169 6.26601 7.86526 6.5462 7.15995 6.5462C6.45463 6.5462 5.77821 6.26601 5.27947 5.76728C4.78074 5.26855 4.50056 4.59212 4.50056 3.8868ZM7.15995 9.00102C5.26728 9.00102 3.52272 9.43143 2.23066 10.1581C0.957427 10.8749 4.57431e-05 11.9599 4.57431e-05 13.297V13.3804C-0.000772532 14.3313 -0.00159088 15.5243 1.04498 16.3769C1.55968 16.7959 2.28058 17.0946 3.25432 17.291C4.22971 17.489 5.50212 17.5929 7.15995 17.5929C8.81777 17.5929 10.0894 17.489 11.0664 17.291C12.0401 17.0946 12.7602 16.7959 13.2757 16.3769C14.3223 15.5243 14.3207 14.3313 14.3199 13.3804V13.297C14.3199 11.9599 13.3625 10.8749 12.0901 10.1581C10.7972 9.43143 9.05344 9.00102 7.15995 9.00102ZM1.22746 13.297C1.22746 12.6006 1.73642 11.8445 2.83209 11.2284C3.90894 10.6228 5.43748 10.2284 7.16077 10.2284C8.88242 10.2284 10.411 10.6228 11.4878 11.2284C12.5843 11.8445 13.0924 12.6006 13.0924 13.297C13.0924 14.3673 13.0597 14.9695 12.5 15.4245C12.1972 15.6716 11.6899 15.913 10.8225 16.0881C9.95763 16.2632 8.77522 16.3655 7.15995 16.3655C5.54467 16.3655 4.36145 16.2632 3.49735 16.0881C2.62998 15.913 2.12265 15.6716 1.81989 15.4253C1.26019 14.9695 1.22746 14.3673 1.22746 13.297Z"
                  fill="black"
                />
              </svg>

              <span>{formatVendorType(displayUser.vendorType)}</span>
            </div>
          </div>
          {/* User Details (Services) */}
          <div className="space-y-3">
            <h3 className="text-lg font-medium">User Details</h3>
            <div className="flex flex-wrap gap-2">
              <span className="text-sm text-gray-700 bg-gray-100 px-3 py-1 rounded-md">
                {formatServiceOffering(displayUser.serviceOffering)}
              </span>
            </div>
          </div>
          {/* Internal Notes */}
          <div className="space-y-3">
            <div className="flex items-center justify-between">
              <h3 className="text-lg font-medium flex items-center gap-2">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M5.80154 2.25037C4.93346 2.25037 4.10094 2.59521 3.48711 3.20903C2.87329 3.82286 2.52844 4.65539 2.52844 5.52346V10.6033C2.52844 11.4714 2.87329 12.3039 3.48711 12.9177C4.10094 13.5316 4.93346 13.8764 5.80154 13.8764H5.87764V16.9793C5.87757 17.0589 5.90068 17.1367 5.94416 17.2033C5.98764 17.2699 6.04959 17.3224 6.12244 17.3544C6.19528 17.3863 6.27587 17.3963 6.35432 17.3832C6.43278 17.3701 6.5057 17.3344 6.56417 17.2804L10.2628 13.8764H13.8378C14.7059 13.8764 15.5384 13.5316 16.1522 12.9177C16.7661 12.3039 17.1109 11.4714 17.1109 10.6033V5.52346C17.1109 4.65539 16.7661 3.82286 16.1522 3.20903C15.5384 2.59521 14.7059 2.25037 13.8378 2.25037H5.80154Z"
                    stroke="black"
                    strokeWidth="1.22741"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                </svg>
                Internal Notes
              </h3>
              <button className="text-lg font-medium flex items-center gap-1">
                <svg
                  width="15"
                  height="15"
                  viewBox="0 0 15 15"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M0.886464 13.297H1.8598L11.3432 3.81358L10.3699 2.84024L0.886464 12.3236V13.297ZM0 14.1834V11.9496L11.6836 0.255315C11.7752 0.174351 11.8757 0.111708 11.985 0.0673849C12.0943 0.0230617 12.2087 0.000604407 12.3281 1.34312e-05C12.4474 -0.000577545 12.5627 0.0183338 12.6738 0.0567473C12.7861 0.0939787 12.8895 0.16135 12.984 0.258861L13.9299 1.21092C14.0274 1.30489 14.0942 1.40831 14.1302 1.52119C14.1657 1.63347 14.1834 1.74576 14.1834 1.85804C14.1834 1.9786 14.1633 2.09384 14.1231 2.20376C14.0824 2.31309 14.018 2.41326 13.9299 2.50427L2.233 14.1834H0ZM10.8485 3.33489L10.3699 2.84024L11.3432 3.81358L10.8485 3.33489Z"
                    fill="black"
                  />
                </svg>
                Edit
              </button>
            </div>
            <div className="bg-[#E9E9E9] rounded-xs p-4 min-h-[100px] flex">
              <span className="text-[#7F7F7F] text-sm">No Note Added yet</span>
            </div>
          </div>
          {/* Action Buttons */}
          <div className="flex items-center justify-center gap-3 pt-4">
            <Button
              className="bg-[#1A78F2] hover:bg-[#1565C0] text-white px-8 py-2 rounded-full text-base font-medium cursor-pointer"
              disabled={displayUser.status === "onboarded" || isUpdating}
              onClick={() => handleStatusUpdate("onboarded")}
            >
              {isUpdating ? "Updating..." : "Onboard"}
            </Button>
            <Button
              variant="destructive"
              className="bg-[#F44336] hover:bg-[#D32F2F] text-white px-8 py-2 rounded-full text-base font-medium cursor-pointer"
              disabled={displayUser.status === "rejected" || isUpdating}
              onClick={() => handleStatusUpdate("rejected")}
            >
              {isUpdating ? "Updating..." : "Reject"}
            </Button>
          </div>
        </div>
      </DialogContent>
    </Dialog>
  );
}
